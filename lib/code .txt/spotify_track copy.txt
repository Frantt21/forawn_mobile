class SpotifyTrack {
  final String title;
  final String duration;
  final String popularity;
  final String url;

  SpotifyTrack({
    required this.title,
    required this.duration,
    required this.popularity,
    required this.url,
  });

  factory SpotifyTrack.fromJson(Map<String, dynamic> json) {
    // Helpers para extraer valores seguros
    String _string(dynamic v) {
      if (v == null) return '';
      if (v is String) return v;
      return v.toString();
    }

    // Algunos APIs devuelven artistas/metadata anidada; intentamos varias claves
    final title = _string(json['title'] ?? json['name'] ?? json['track'] ?? json['song']);
    final duration = _string(json['duration'] ?? json['duration_ms'] ?? json['length'] ?? json['time']);
    final popularity = _string(json['popularity'] ?? json['score'] ?? json['rating'] ?? '');
    final url = _string(json['url'] ?? json['link'] ?? json['track_url'] ?? json['spotify_url']);

    return SpotifyTrack(
      title: title,
      duration: duration,
      popularity: popularity,
      url: url,
    );
  }
}class SpotifyTrack {
  final String title;
  final String duration;
  final String popularity;
  final String url;

  SpotifyTrack({
    required this.title,
    required this.duration,
    required this.popularity,
    required this.url,
  });

  factory SpotifyTrack.fromJson(Map<String, dynamic> json) {
    // Helpers para extraer valores seguros
    String _string(dynamic v) {
      if (v == null) return '';
      if (v is String) return v;
      return v.toString();
    }

    // Algunos APIs devuelven artistas/metadata anidada; intentamos varias claves
    final title = _string(json['title'] ?? json['name'] ?? json['track'] ?? json['song']);
    final duration = _string(json['duration'] ?? json['duration_ms'] ?? json['length'] ?? json['time']);
    final popularity = _string(json['popularity'] ?? json['score'] ?? json['rating'] ?? '');
    final url = _string(json['url'] ?? json['link'] ?? json['track_url'] ?? json['spotify_url']);

    return SpotifyTrack(
      title: title,
      duration: duration,
      popularity: popularity,
      url: url,
    );
  }
}